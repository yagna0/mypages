import{c as y,a as t,R as S}from"./jsx-runtime.5ceaade3.js";import{c as N}from"./client.55c3de15.js";const v=10,x=20,E=[{shape:[[1,1,1],[0,1,0]],color:"red"},{shape:[[1,1],[1,1]],color:"blue"},{shape:[[1,1,1,1]],color:"green"}],R=()=>Array.from({length:x},()=>Array(v).fill(null)),T=()=>E[Math.floor(Math.random()*E.length)],w=()=>{const[p,h]=y.exports.useState(R()),[o,u]=y.exports.useState(T()),[r,n]=y.exports.useState({x:4,y:0});y.exports.useEffect(()=>{const e=setInterval(()=>c(),500);return()=>clearInterval(e)},[r]);const s=e=>o.shape.every((a,i)=>a.every((b,g)=>{var m;if(!b)return!0;const l=e.x+g,d=e.y+i;return d<x&&l>=0&&l<v&&((m=p[d])==null?void 0:m[l])===null})),c=()=>{n(e=>{const a={x:e.x,y:e.y+1};return s(a)?a:f()})},f=()=>{h(e=>{const a=e.map(i=>[...i]);return o.shape.forEach((i,b)=>{i.forEach((g,l)=>{if(g){const d=r.x+l,m=r.y+b;m<x&&d<v&&(a[m][d]=o.color)}})}),a}),u(T()),n({x:4,y:0})};return t("div",{className:"game",children:t(B,{board:p,tetrimino:o,position:r})})},B=({board:p,tetrimino:h,position:o})=>{const u=p.map(r=>[...r]);return h.shape.forEach((r,n)=>{r.forEach((s,c)=>{if(s){const f=o.x+c,e=o.y+n;e<x&&f<v&&(u[e][f]=h.color)}})}),t("div",{className:"board",children:u.map((r,n)=>t("div",{className:"row",children:r.map((s,c)=>t("div",{className:"cell",style:{backgroundColor:s||"gray"}},c))},n))})};function M(){return t("div",{className:"App",children:t(w,{})})}N.createRoot(document.getElementById("root")).render(t(S.StrictMode,{children:t(M,{})}));
