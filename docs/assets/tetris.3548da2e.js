import{c as f,j as b,a as c,R as J}from"./jsx-runtime.85a21188.js";import{c as W}from"./client.4500db6f.js";const C=20,w=10,O=()=>Array.from({length:C},()=>Array(w).fill(0)),L={I:{shape:[[1,1,1,1]],color:"cyan"},O:{shape:[[1,1],[1,1]],color:"yellow"},T:{shape:[[0,1,0],[1,1,1]],color:"purple"},S:{shape:[[0,1,1],[1,1,0]],color:"green"},Z:{shape:[[1,1,0],[0,1,1]],color:"red"},J:{shape:[[1,0,0],[1,1,1]],color:"blue"},L:{shape:[[0,0,1],[1,1,1]],color:"orange"}},I=()=>{const i=Object.keys(L),k=i[Math.floor(Math.random()*i.length)],v=L[k];return{shape:v.shape,color:v.color,x:3,y:0}},X=()=>{const[i,k]=f.exports.useState(O()),[v,E]=f.exports.useState(0),[g,B]=f.exports.useState(!1),[m,G]=f.exports.useState(null),[P,A]=f.exports.useState(I()),x=e=>{new Audio(e).play()},D=()=>{if(!g){B(!0),k(O()),E(0),A(I()),x("/sounds/start.wav");const e=setInterval(()=>{R()},500);G(e)}},M=()=>{B(!1),m&&(clearInterval(m),G(null))},R=()=>{A(e=>{const{shape:t,x:s,y:o}=e,n=o+1;return t.some((u,l)=>u.some((p,y)=>{if(p){const h=s+y,r=n+l;return r>=C||r>=0&&i[r][h]}return!1}))?($(e),o===0?(M(),x("/sounds/game-over.mp3"),alert("Game Over!"),e):I()):(x("/sounds/move.ogg"),{...e,y:n})}),E(e=>e+10)},S=e=>{A(t=>{const{shape:s,x:o,y:n}=t,a=o+e;return s.every((l,p)=>l.every((y,h)=>{if(!y)return!0;const r=a+h,d=n+p;return r>=0&&r<w&&(!i[d]||!i[d][r])}))?(x("/sounds/move.ogg"),{...t,x:a}):t})},$=e=>{const{shape:t,x:s,y:o,color:n}=e;k(a=>{const u=a.map(l=>[...l]);return t.forEach((l,p)=>{l.forEach((y,h)=>{if(y){const r=s+h,d=o+p;d>=0&&d<C&&r>=0&&r<w&&(u[d][r]=n)}})}),z(u)})},z=e=>{const t=e.filter(o=>o.some(n=>!n)),s=C-t.length;if(s>0){const o=Array.from({length:s},()=>Array(w).fill(0));return E(n=>n+s*100),x("/sounds/line-clear.wav"),[...o,...t]}return e};return f.exports.useEffect(()=>{const e=t=>{!g||(t.key==="ArrowLeft"&&S(-1),t.key==="ArrowRight"&&S(1),t.key==="ArrowDown"&&R())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[g,i]),f.exports.useEffect(()=>()=>{m&&clearInterval(m)},[m]),b("div",{style:{textAlign:"center",marginTop:"20px"},children:[c("h1",{children:"Tetris"}),c("div",{style:{display:"grid",gridTemplateColumns:`repeat(${w}, 20px)`,gap:"1px",justifyContent:"center",background:"black",padding:"5px",margin:"0 auto"},children:i.map((e,t)=>e.map((s,o)=>{let n=!1,a="";const{shape:u,x:l,y:p,color:y}=P;return u.forEach((h,r)=>h.forEach((d,K)=>{if(d){const N=l+K,Y=p+r;N===o&&Y===t&&(n=!0,a=y)}})),c("div",{style:{width:20,height:20,backgroundColor:n?a:typeof s=="string"?s:"white",border:"1px solid black"}},`${t}-${o}`)}))}),b("h2",{children:["Score: ",v]}),b("div",{style:{margin:"10px"},children:[c("button",{onClick:D,disabled:g,style:j,children:"Start"}),c("button",{onClick:M,disabled:!g,style:j,children:"Stop"})]}),b("div",{style:{marginTop:"20px"},children:[c("button",{onClick:()=>S(-1),style:T,children:"\u2190"}),c("button",{onClick:()=>R(),style:T,children:"\u2193"}),c("button",{onClick:()=>S(1),style:T,children:"\u2192"})]})]})},j={margin:"10px",padding:"10px 20px",fontSize:"16px"},T={margin:"5px",padding:"10px 15px",fontSize:"20px",cursor:"pointer"};function Z(){return c("div",{className:"App",children:c(X,{})})}W.createRoot(document.getElementById("root")).render(c(J.StrictMode,{children:c(Z,{})}));
