import{c as i,j as p,a as r,R as G}from"./jsx-runtime.85a21188.js";import{c as L}from"./client.4500db6f.js";const I=()=>{const g=()=>Array.from({length:20},()=>Array(10).fill(0)),[d,h]=i.exports.useState(g()),[b,y]=i.exports.useState(0),[c,S]=i.exports.useState(!1),[l,w]=i.exports.useState(null),[k,m]=i.exports.useState({x:4,y:0}),a=e=>{new Audio(e).play()},R=()=>{if(!c){S(!0),h(g()),y(0),m({x:4,y:0}),a("/sounds/start.wav");const e=setInterval(()=>{x()},500);w(e)}},C=()=>{S(!1),l&&(clearInterval(l),w(null))},x=()=>{m(e=>{const t=e.y+1;return t>=20||d[t][e.x]?(A(e),e.y===0?(C(),a("/sounds/game-over.mp3"),alert("Game Over!"),e):{x:4,y:0}):(a("/sounds/move.ogg"),{...e,y:t})}),y(e=>e+10)},u=e=>{m(t=>{const n=t.x+e;return n>=0&&n<10&&!d[t.y][n]?(a("/sounds/move.ogg"),{...t,x:n}):t})},A=e=>{h(t=>{const n=t.map(s=>[...s]);return n[e.y][e.x]=1,O(n)})},O=e=>{const t=e.filter(o=>o.some(s=>s===0)),n=20-t.length;if(n>0){const o=Array.from({length:n},()=>Array(10).fill(0));return y(s=>s+n*100),a("/sounds/line-clear.wav"),[...o,...t]}return e};return i.exports.useEffect(()=>{const e=t=>{!c||(t.key==="ArrowLeft"&&u(-1),t.key==="ArrowRight"&&u(1),t.key==="ArrowDown"&&x())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c,d]),i.exports.useEffect(()=>()=>{l&&clearInterval(l)},[l]),p("div",{style:{textAlign:"center",marginTop:"20px"},children:[r("h1",{children:"Tetris"}),r("div",{style:{display:"grid",gridTemplateColumns:`repeat(${10}, 20px)`,gap:"1px",justifyContent:"center",background:"black",padding:"5px",margin:"0 auto"},children:d.map((e,t)=>e.map((n,o)=>{const s=t===k.y&&o===k.x;return r("div",{style:{width:20,height:20,backgroundColor:s?"red":n?"blue":"white",border:"1px solid black"}},`${t}-${o}`)}))}),p("h2",{children:["Score: ",b]}),p("div",{style:{margin:"10px"},children:[r("button",{onClick:R,disabled:c,style:v,children:"Start"}),r("button",{onClick:C,disabled:!c,style:v,children:"Stop"})]}),p("div",{style:{marginTop:"20px"},children:[r("button",{onClick:()=>u(-1),style:f,children:"\u2190"}),r("button",{onClick:()=>x(),style:f,children:"\u2193"}),r("button",{onClick:()=>u(1),style:f,children:"\u2192"})]})]})},v={margin:"10px",padding:"10px 20px",fontSize:"16px"},f={margin:"5px",padding:"10px 15px",fontSize:"20px",cursor:"pointer"};function B(){return r("div",{className:"App",children:r(I,{})})}L.createRoot(document.getElementById("root")).render(r(G.StrictMode,{children:r(B,{})}));
